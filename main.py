import asyncio
from aiogram import Bot, Dispatcher, F
from aiogram.types import Message, CallbackQuery
from aiogram.utils.keyboard import InlineKeyboardBuilder

BOT_TOKEN = "8373645154:AAEl6ZKhQgkVItA6VzwffDnfTPiWy1doOvo"

bot = Bot(token=BOT_TOKEN)
dp = Dispatcher()

# ---------------------- ููู ุงุตู -----------------------
def main_menu():
    kb = InlineKeyboardBuilder()
    kb.button(text="๐ุงุณุชุนูุงู ูพุดุฑูุชู ฺฉุฏ ูู ๐ก", callback_data="nat_code")
    kb.button(text="๐ุงุณุชุนูุงู ูพุดุฑูุชู ุดูุงุฑู ุชููู โ๏ธ", callback_data="phone")
    kb.button(text="๐ุงุณุชุนูุงู ูพุดุฑูุชู ุดูุงุณูุงูู ๐ชช", callback_data="shenas")
    kb.adjust(1)
    return kb.as_markup()


# ---------------------- ูพุงู ุฎูุด ุขูุฏ ----------------------
WELCOME_TEXT = """
๐ ุณูุงู ู ุงุฑุฒ ุงุฏุจ ุฎุฏูุช ฺฉุงุฑุจุฑุงู ุนุฒุฒ ๐

๐ป ุจู ุฑุจุงุช ุงุณุชุนูุงู ุตุญุช ฺฉุฏูู ุฎูุด ุขูุฏุฏโป๏ธ

๐ ูุงุจูุชโูุง ุฑุจุงุช ูุง: ๐

1- ๐ ุงุณุชุนูุงู ุดูุงุฑู ุชููู ู ุงุทูุงุนุงุช ูุงู ูุงูฺฉ ุดูุงุฑู ๐  
2- ๐ ุงุณุชุนูุงู ุตุญุช ุดูุงุณูุงูู ๐  

๐๏ธ ุงู ุฑุจุงุช ฺฉุงููุงู ูุงููู ุจูุฏู ู ุงุทูุงุนุงุช ุดูุง ูุฒุฏ ูุง ูุญููุธ ุงุณุช ๐  
๐๏ธ ุงุทูุงุนุงุช ุดูุง ุฐุฎุฑู ููโุดูุฏ ู ุจุนุฏ ุงุฒ 48 ุณุงุนุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุญุฐู ุฎูุงูุฏ ุดุฏ ๐ฒ  

๐ ูููู ุจุงุดุฏ ๐ข
"""


@dp.message(F.text == "/start")
async def start(msg: Message):
    await msg.answer(WELCOME_TEXT, reply_markup=main_menu())


# ============================================================
# ================== ุงุณุชุนูุงู ฺฉุฏ ูู ==========================
# ============================================================

@dp.callback_query(F.data == "nat_code")
async def nat_menu(call: CallbackQuery):
    text = """
ุณูุงู ู ุนุฑุถ ุงุฏุจ ๐ธ
ฺฉุงุฑุจุฑ ฺฏุฑุงูุ ุจู ุฑุจุงุช ุงุณุชุนูุงู ุตุญุช ฺฉุฏ ูู ุฎูุด ุขูุฏุฏ.

ุงู ุฑุจุงุช ุจุง ุฏูุช ุจุงูุง ๐ข ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ฺฉุฏ ูู ุงุฑุณุงูโุดุฏู ูุนุชุจุฑ ูุณุช ุง ุฎุฑ.
ุงุทููุงู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุงุทูุงุนุงุช ุดูุง ุซุจุช ููโุดูุฏ ู ุจุนุฏ ุงุฒ 48 ุณุงุนุช ุญุฐู ูโฺฏุฑุฏุฏ.

ูููู ุจุงุดุฏ ๐
ุจุฑุง ุงุณุชุนูุงู ฺฉุฏ ูู ุฏฺฉูู ุฒุฑ ุฑุง ูุดุงุฑ ุฏูุฏ.
"""
    kb = InlineKeyboardBuilder()
    kb.button(text="๐ฒ ูุบู ุงุณุชุนูุงู ู ุจุงุฒฺฏุดุช ุจู ููู ุงุตู ๐ฒ", callback_data="back_main")
    kb.button(text="๐ตุงุฏุงูู ๐ู ุงุณุชุนูุงู ฺฉุฏ ูู ๐ฏ", callback_data="nat_continue")
    kb.adjust(1)
    await call.message.edit_text(text, reply_markup=kb.as_markup())


@dp.callback_query(F.data == "nat_continue")
async def nat_continue(call: CallbackQuery):
    await call.message.edit_text("""
โจ ุณูุงู ู ุนุฑุถ ุงุฏุจ โจ

ุจุฑุง ุงุณุชุนูุงู ุตุญุช ฺฉุฏ ูู ูุทูุงู **ฺฉ ุนฺฉุณ ูุงุถุญ ุงุฒ ูพุดุช ู ุฑู ฺฉุงุฑุช ูู** ุงุฑุณุงู ฺฉูุฏ. ๐ชช๐ธ

โณ ูุชุฌู ุงุณุชุนูุงู ุญุฏุงฺฉุซุฑ ุธุฑู ฒด ุณุงุนุช ุงุนูุงู ูโุดูุฏ.

๐ุงุทูุงุนุงุช ุฐุฎุฑู ููโุดูุฏ ู ูพุณ ุงุฒ ฒด ุณุงุนุช ุญุฐู ุฎูุงูุฏ ุดุฏ.
""")
    await call.answer()


@dp.message(F.photo)
async def receive_photos(msg: Message):
    await msg.answer("""
โ ุงุทูุงุนุงุช ุดูุง ุจุง ููููุช ุจู ุณุณุชู ุงุณุชุนูุงู ุฎูุฏฺฉุงุฑ ุงุฑุณุงู ุดุฏ.

ุจู ุฏูู ุญุฌู ุจุงูุง ุฏุฑุฎูุงุณุชโูุงุ ุจุฑุฑุณ ููฺฉู ุงุณุช ฑ ุชุง ณ ุณุงุนุช ุทูู ุจฺฉุดุฏ. โณ

๐ ูููู ุจุงุดุฏ ๐
""", reply_markup=back_button())


# ============================================================
# ================== ุงุณุชุนูุงู ุดูุงุฑู ุชููู =====================
# ============================================================

@dp.callback_query(F.data == "phone")
async def phone_menu(call: CallbackQuery):
    text = """
โจ ุณูุงู ู ุนุฑุถ ุงุฏุจ ฺฉุงุฑุจุฑ ฺฏุฑุงู โจ
ุจู ุฑุจุงุช ุงุณุชุนูุงู ุตุญุช ุดูุงุฑู ุชููู ุฎูุด ุขูุฏุฏ.

ุงู ุฑุจุงุช ุจุง ุฏูุช ุจุงูุง ๐ข ุดูุงุฑูโุง ฺฉู ุงุฑุณุงู ูโฺฉูุฏ ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ.
ุงุทูุงุนุงุช ุฐุฎุฑู ููโุดูุฏ ู ูพุณ ุงุฒ 24โ48 ุณุงุนุช ุญุฐู ูโฺฏุฑุฏุฏ.

๐ ูููู ุจุงุดุฏ
ุจุฑุง ุดุฑูุน ุงุณุชุนูุงูุ ูุทูุงู ุฏฺฉูู ุฒุฑ ุฑุง ูุดุงุฑ ุฏูุฏ.
"""
    kb = InlineKeyboardBuilder()
    kb.button(text="๐ฒ ูุบู ุงุณุชุนูุงู ู ุจุงุฒฺฏุดุช ุจู ููู ุงุตู ๐ฒ", callback_data="back_main")
    kb.button(text="๐ตุงุฏุงูู ๐ู ุงุณุชุนูุงู ุดูุงุฑู ุชููู ๐ฏ", callback_data="phone_continue")
    kb.adjust(1)
    await call.message.edit_text(text, reply_markup=kb.as_markup())


@dp.callback_query(F.data == "phone_continue")
async def phone_continue(call: CallbackQuery):
    await call.message.edit_text("""
โจ ุณูุงู ู ุนุฑุถ ุงุฏุจ โจ

ูุทูุงู **ุดูุงุฑู ุชููู ููุฑุฏูุธุฑ** ุฑุง ุงุฑุณุงู ฺฉูุฏ. ๐ฑ๐

โณ ูุชุฌู ุงุณุชุนูุงู ุท ุญุฏุงฺฉุซุฑ ฒด ุณุงุนุช ุงุนูุงู ุฎูุงูุฏ ุดุฏ.

๐ ุงุทูุงุนุงุช ุฐุฎุฑู ููโุดูุฏ ู ูพุณ ุงุฒ 48 ุณุงุนุช ุญุฐู ูโฺฏุฑุฏุฏ.
""")


@dp.message(F.text.regexp(r"^\d{10,11}$"))
async def phone_received(msg: Message):
    await msg.answer("""
โ ุงุทูุงุนุงุช ุดูุง ุจุง ููููุช ุจู ุณุณุชู ุงุณุชุนูุงู ุดูุงุฑู ุชููู ุงุฑุณุงู ุดุฏ.

ููฺฉู ุงุณุช ุจุฑุฑุณ ฑ ุชุง ณ ุณุงุนุช ุทูู ุจฺฉุดุฏ. โณ๐ฑ

๐ ูููู ุจุงุดุฏ ๐
""", reply_markup=back_button())


# ============================================================
# ================== ุงุณุชุนูุงู ุดูุงุณูุงูู =======================
# ============================================================

@dp.callback_query(F.data == "shenas")
async def shenas_menu(call: CallbackQuery):
    text = """
ุณูุงู ู ุนุฑุถ ุงุฏุจ ๐ธ
ุจู ุฑุจุงุช ุงุณุชุนูุงู ุตุญุช ุดูุงุณูุงูู ุฎูุด ุขูุฏุฏ.

ุงู ุฑุจุงุช ุดูุงุณูุงูู ุงุฑุณุงูโุดุฏู ุฑุง ุจุฑุฑุณ ู ุงุนุชุจุงุฑุณูุฌ ูโฺฉูุฏ.
ุงุทูุงุนุงุช ุฐุฎุฑู ููโุดูุฏ ู ุจุนุฏ ุงุฒ 48 ุณุงุนุช ุญุฐู ุฎูุงูุฏ ุดุฏ.

ูููู ุจุงุดุฏ ๐
ุจุฑุง ุงุณุชุนูุงู ุดูุงุณูุงูู ุฏฺฉูู ุฒุฑ ุฑุง ุจุฒูุฏ.
"""
    kb = InlineKeyboardBuilder()
    kb.button(text="๐ฒ ูุบู ุงุณุชุนูุงู ู ุจุงุฒฺฏุดุช ุจู ููู ุงุตู ๐ฒ", callback_data="back_main")
    kb.button(text="๐ตุงุฏุงูู ๐ู ุงุณุชุนูุงู ุดูุงุณูุงูู ๐ฏ", callback_data="shenas_continue")
    kb.adjust(1)
    await call.message.edit_text(text, reply_markup=kb.as_markup())


@dp.callback_query(F.data == "shenas_continue")
async def shenas_continue(call: CallbackQuery):
    await call.message.edit_text("""
โจ ุณูุงู ู ุนุฑุถ ุงุฏุจ โจ

ูุทูุงู **ุนฺฉุณ ูพุดุช ู ุฑู ุดูุงุณูุงูู** ุฑุง ุงุฑุณุงู ฺฉูุฏ. ๐ชช๐ธ

โณ ูุชุฌู ุงุณุชุนูุงู ุชุง ฒด ุณุงุนุช ุงุนูุงู ูโุดูุฏ.

๐ ุงุทูุงุนุงุช ุฐุฎุฑู ููโุดูุฏ ู ุจุนุฏ ุงุฒ ฒด ุณุงุนุช ุญุฐู ูโฺฏุฑุฏุฏ.
""")


# ============================================================
# ุฏฺฉูู ุจุงุฒฺฏุดุช
# ============================================================

def back_button():
    kb = InlineKeyboardBuilder()
    kb.button(text="๐ฏ ุจุงุฒฺฏุดุช ุจู ููู ุงุตู ๐", callback_data="back_main")
    kb.adjust(1)
    return kb.as_markup()


@dp.callback_query(F.data == "back_main")
async def back_main(call: CallbackQuery):
    await call.message.edit_text(WELCOME_TEXT, reply_markup=main_menu())


# ============================================================
# ุงุฌุฑุง ุฑุจุงุช
# ============================================================
async def main():
    await dp.start_polling(bot)

asyncio.run(main())
